Binary Studio Academy PHP 2018
====

### Домашнее задание #4

#### Требования
Это задание направлено на проектировние архитектуры приложения с использованием
принципов ООП и паттернов проектирования. В частности затрагивается обработка
команд и ошибок, управление состоянием и жизненным циклом объектов, геймификация.


***

#### Установка

Установка показана в рабочем окружении OS Linux:

```bash
git clone https://pavelnemoi@bitbucket.org/pavelnemoi/bsa-php-2018-4.git
cd bsa-2018-php-4
composer install
```

Мы рекомендум использовать Homestead.

#### Задание

Реализовать игру "Spaceship constructor" с консольным интерфейсом по следующему описанию:

Представьте, что мы строим космический корабль. Он состоит из следующего набора частей:

* shell(корпус)
* porthole(иллюминатор)
* control_unit(панель управления)
* engine(двигатель)
* launcher(пусковая установка)
* tank(топливный бак)

[Здесь](https://drive.google.com/file/d/1JfxBIqYFk72xpxDqXvNRqmuQdsbqzTvQ/view) представлена схема построения корабля.

Для построения каждой части корабля требуются определенные ресурсы(см. схему по ссылке выше). 
Ресурсы могут быть комбинированными(metal).

* metal(iron + fire)
* fire
* sand
* iron
* silicon
* copper
* carbon
* water
* fuel

Игра заключается в том, чтобы построить корабль последовательно, строя каждый его модуль(shell, etc.) отдельно, 
при этом использовать необходимые ресурсы(metal, fire, etc.). 

**Игра заканчивается когда игрок полностью собирает корабль или по команде exit.**

Ваша основная задача: реализовать консольный интерфейс управления этой игрой со следующими
**командами** (данные хранятся в памяти):  

* `help` - показывает список доступных команд.  
* `status` - показывает информацию о кол-ве доступных ресурсов и какие части корабля еще не собраны.  
* `build:<spaceship_module>` - построить модуль корабля. Нет такого модуля или уже построен - ошибка. 
Если не хватает ресурсов - вывести справку о том, какие ресурсы нужны для постройки модуля. Если все модули построены - вывести сообщение о победе и выйти из игры.
* `scheme:<spaceship_module>` - вывести информацию/схему о том какие модули/ресурсы нужны, чтобы построить модуль. Нет такого модуля - ошибка. 
* `mine:<resource_name>` - добавить единицу ресурса(fire) в инвентарь/склад. Нет такого ресурса - ошибка.
* `produce:<combined_resource>` - произвести комбинированный ресурс(метал). 
Если не хватает необходимых ресурсов - вывести сообщение об этом.
* `exit` - выходит из игры.  

Ввод несуществующей команды - ошибка.

Предусмотреть расширяемость функциональности игры другими командами.

Результат выполнения команд отображается на экране соответвующим сообщением.
Например, при вводе команды `status`:

`You have:` 

* fire - 1;
* metal - 2;
* water - 1;

`Parts ready: `

* shell
* tank

`Parts to build: `

* engine
* launcher
* ...etc

Например, при вводе команды `build:shell`:

*Shell is ready!*

Формат остальных сообщений содержится в файле `GameTest.php`.

##### Режимы игры

Вам предстоить реализовать 2 режима:

* `run(Reader $reader, Writer $writer)` - запускает игру в пошаговом режиме.
Необходим для тестирования. В этом режиме **игровой мир** (объекты игры)
должен создаваться только один раз, т.к. для выполнения команд важно предыдущее состояние объектов.
(Например, нельзя дважды построить один и тот же модуль корабля.)

* `start(Reader $reader, Writer $writer)` - запускает игру в цикле и опрашивает пользовательский ввод.
В этому случае **игровой мир** также создаётся единожды.
Выход из цикла возможен по команде `exit` или когда будут построены все части корабля.
Это основной режим игры.

Часть класса `Game` а также примеры релизации `Reader` и `Writer` прилагаюся.

#### Проверка

Работоспособность игры проверяется в 2 этапа.

* Запуск файла `game.php` должен позволять играть в игру используя консольный ввод.
Должно быть предложение на ввод команд и их соответвующая обработка до условия конца игры.

* Как и в первом задании свои решения можно проверить запустив тесты PHPUnit.

Все тесты:

```bash
./vendor/bin/phpunit
```
***

#### Приём решений

В идеале разместить ваше решение в отдельном репозитории на Github или Bitbucket
и прислать ссылку на него. В решении хотелось бы видеть использование нескольких паттернов проектирования(Command, Factory и т.д), 
[примеры здесь](https://designpatternsphp.readthedocs.io/en/latest/).
**Форкать этот репозиторий нельзя.**
